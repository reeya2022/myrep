最初DVD版をインストールしたけど重すぎるのでminimalからGUIを追加インストールする方法を試してみる

https://qiita.com/Ko_Miya/items/7d24d018ef10f2e342c7
ソフトウェアの選択→最小限のインストール

dnf -y upgrade

cat /etc/redhat-release

//selinux無効
vi /etc/selinux/config
SELINUX=disabled
→変更後centos再起動

//なぜかiptablesで色々制限かかっていたので無効化
systemctl stop firewalld.service
systemctl disable firewalld

//guiをインストール
dnf -y group install "Server with GUI"
systemctl set-default graphical
reboot

※ログイン後に何故かフリーズしてしまう・・・
→rootだとログインできたけどやっぱりフリーズ

※※グラフィックコントローラーをVMSVGAにしたらフリーズしなくなった！！！！！

//クリップボードの共有
→ VirtualBox Guest Additionsのセットアップが必要

	イメージ挿入すると挿入できない、というエラーが発生
	https://www.koikikukan.com/archives/2020/04/13-235555.php
	→これに従う
	→これだけだと共有できず
	
	https://qiita.com/terappy/items/aebf7786b9d6d584f92b
	https://teratail.com/questions/268595
	→この辺のことやったけどダメ
	→諦めてputtyでやる

//httpインストール
dnf -y install httpd

systemctl list-unit-files -t service | grep http
systemctl enable httpd.service

//共有フォルダ設定
共有フォルダの設定をしても反映されず
それどころかGuest Additions CDイメージまでマウントできなくなった
/var/log/messagesを見たらエラーメッセージ(Unknown filesystem type 'iso9660)が出ていた

https://blog.omak.work/articles/47
→これの通りに/dev/cdromを/mntにマウントしたら上手くいった

共有フォルダ設定で/mntをマウントポイントにしてしまったのがダメだったのかも。
共有フォルダ設定をするときは、マウントポイント空欄にすること。

結局、Guest Additionsがインストールできない
でやったこと

https://t-cr.jp/memo/12b179855cf16232
yum -y update  kernel
yum -y install kernel-devel kernel-headers dkms gcc gcc-c++
reboot

mount /dev/cdrom /mnt
※この時点でクリップボードの共有が出来た！！

これで共有できたのでもう何もしない方が良い
ウィンドウのサイズ変更も出来るようになった

共有フォルダも設定できた。マウントポイントを空欄にすると/media/にマウントされる。

//phpインストール
dnf module enable php:7.4 -y
yum -y install php php-devel php-mbstring php-intl php-xml php-xmlrpc php-gd php-pdo php-mysqlnd php-pgsql php-pear

php -v
yum list installed | grep php

//php.ini修正
vi /etc/php.ini

date.timezone = "Asia/Tokyo"

mbstring.language = Japanese
mbstring.internal_encoding = UTF-8
mbstring.http_input = UTF-8
mbstring.http_output = pass
mbstring.encoding_translation = On
mbstring.detect_order = auto
mbstring.substitute_charset = none

//composerのインストール
curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer
composer -V


//cakephp4のプロジェクト作成
mkdir /media/sf_rockylinux/myapp/
ln -s /media/sf_rockylinux/myapp/ /var/www/html/myapp
cd /media/sf_rockylinux/myapp/
composer create-project --prefer-dist cakephp/app:4.* myapp

やっぱりだめ。↓で止まってしまう。
  - Installing cakephp/app (4.3.1): Extracting archive

よく考えたらlinuxからがダメなら、windowsからcomposerを実行すればいい







==================
↓以下DVD版

http://dl.rockylinux.org/vault/rocky/8.4/BaseOS/x86_64/iso/
DVDの8.4をダウンロード(minimalだとGUIにならないっぽい)

https://vboxmania.net/%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E8%A8%AD%E5%AE%9A/
グラフィックコントローラーはVBoxSVGAが良いっぽい

※:が入力できない
→ 「Shift」+ 「+」

※virtualboxからマウスが出られない場合
→ 右側のCtrlキー

※virtualboxのマウスカーソルが消える件
→ ポインティングデバイスをPS/2 マウスからUSBタブレットに変更する
→ それでもたまに消える時があるのでその場合はリセットする

※virtualboxの画面が黒いままになる
→ ビデオメモリが不足している可能性 →ダメ
→ virtualboxを管理者権限で動かす →ダメ？
→ グラフィックコントローラーをVBoxSVGAにして、それでも発生したら↓のフリーズするを参照

※virtualboxがフリーズする(起動中・ログイン時・ログイン中)
→ アクセラレーションをデフォルトからHyper-Vにする →ダメ。panicになる
→ プロセッサーを1にする(増やすと不安定になる)
→ メモリ8GBに変更(16GBでも変わらず)
→ 後はもうフリーズしたら電源を落として再度起動すること(リセットよりも落として起動しなおした方が良さそう)


※ゲスト側のIPとホスト側のIPがマッチしていない
→ ネットワークをブリッジアダプターにする


//NATとブリッジの違いがクソ分かりやすい記事
https://qiita.com/pitao/items/0f9475e4c0e230911eb7


